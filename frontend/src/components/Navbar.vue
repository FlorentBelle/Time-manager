<script setup>
  import { RouterLink } from 'vue-router'
  import router from '../router';
</script>

<template>
  <div class="navbar" role="navigation">
    <div class="navbar-menu-container-empty" v-if="!this.$store.state.userConnected.isConnected"></div>
    <div class="navbar-menu-container" v-if="this.$store.state.userConnected.isConnected">
      <div class="navbar-menu-sup-icon" v-if="!showMenu" v-on:click="changeMenu()">
        <svg viewBox="0 0 512 512">
          <path d="m464.883 64.267h-417.766c-25.98 0-47.117 21.136-47.117 47.149 0 25.98 21.137 47.117 47.117 47.117h417.766c25.98 0 47.117-21.137 47.117-47.117 0-26.013-21.137-47.149-47.117-47.149z"/>
          <path d="m464.883 208.867h-417.766c-25.98 0-47.117 21.136-47.117 47.149 0 25.98 21.137 47.117 47.117 47.117h417.766c25.98 0 47.117-21.137 47.117-47.117 0-26.013-21.137-47.149-47.117-47.149z"/>
          <path d="m464.883 353.467h-417.766c-25.98 0-47.117 21.137-47.117 47.149 0 25.98 21.137 47.117 47.117 47.117h417.766c25.98 0 47.117-21.137 47.117-47.117 0-26.012-21.137-47.149-47.117-47.149z"/>
        </svg>
      </div>
      <div class="navbar-menu" v-if="showMenu">
          <div class="navbar-menu-title-container">
            <h2 class="navbar-menu-title">Menu</h2>
            <div class="navbar-menu-icon" v-on:click="changeMenu()">
              <svg viewBox="0 0 320.591 320.591" >
                <path d="m30.391 318.583c-7.86.457-15.59-2.156-21.56-7.288-11.774-11.844-11.774-30.973 0-42.817l257.812-257.813c12.246-11.459 31.462-10.822 42.921 1.424 10.362 11.074 10.966 28.095 1.414 39.875l-259.331 259.331c-5.893 5.058-13.499 7.666-21.256 7.288z"/>
                <path d="m287.9 318.583c-7.966-.034-15.601-3.196-21.257-8.806l-257.813-257.814c-10.908-12.738-9.425-31.908 3.313-42.817 11.369-9.736 28.136-9.736 39.504 0l259.331 257.813c12.243 11.462 12.876 30.679 1.414 42.922-.456.487-.927.958-1.414 1.414-6.35 5.522-14.707 8.161-23.078 7.288z"/>
              </svg>
            </div>
          </div>
          <div class="navbar-container-items">
            <ul v-if="this.$store.state.userConnected.isConnected" class="navbar-list-items">
              <li class="navbar-items">
                <svg  viewBox="0 0 32 32">
                  <path d="m29.219 11.776-11.999-9.23c-.719-.554-1.722-.554-2.44 0l-12 9.23c-.492.379-.78.964-.78 1.585v14.508c0 1.105.895 2 2 2h6c.552 0 1-.448 1-1v-6.777c0-2.61 1.903-4.945 4.5-5.199 2.98-.291 5.5 2.054 5.5 4.976v7c0 .552.448 1 1 1h6c1.105 0 2-.895 2-2v-14.507c0-.622-.289-1.208-.781-1.586z"/>
                </svg>
                <RouterLink to="/home">Home</RouterLink>
              </li>
              <li class="navbar-items">
                <svg viewBox="0 0 24 24">
                  <path d="m12 1.25a10.75 10.75 0 1 0 10.75 10.75 10.762 10.762 0 0 0 -10.75-10.75zm-6.25 10.75a.75.75 0 0 1 -1.5 0 7.759 7.759 0 0 1 7.75-7.75 7.651 7.651 0 0 1 2.991.6.75.75 0 1 1 -.582 1.382 6.174 6.174 0 0 0 -2.409-.482 6.257 6.257 0 0 0 -6.25 6.25zm11.86-4.564-4.247 5.945a1.5 1.5 0 1 1 -1.363-.881c.048 0 .093.01.14.014l4.25-5.95a.75.75 0 1 1 1.22.872zm1.39 5.314a.75.75 0 0 1 -.75-.75 5.909 5.909 0 0 0 -.2-1.556.75.75 0 1 1 1.449-.388 7.486 7.486 0 0 1 .251 1.944.75.75 0 0 1 -.75.75z"/>
                </svg>
                <RouterLink :to="'/working_times/' + this.$store.state.userConnected.id">Working times</RouterLink>
              </li>
              <li class="navbar-items">
                <svg viewBox="0 0 512 512">
                  <g>
                    <g>
                      <path d="M256,0C114.844,0,0,114.844,0,256s114.844,256,256,256s256-114.844,256-256S397.156,0,256,0z M256,74.667
                        c67.635,0,122.667,55.031,122.667,122.667S323.635,320,256,320s-122.667-55.031-122.667-122.667S188.365,74.667,256,74.667z
                        M256,469.333c-69.707,0-131.52-33.755-170.473-85.615c42.676-20.534,103.621-42.385,170.473-42.385
                        c66.857,0,127.807,21.854,170.474,42.383C387.521,435.577,325.708,469.333,256,469.333z"/>
                    </g>
                  </g>
                </svg>
                <RouterLink :to="'/chart_manager/' + this.$store.state.userConnected.id">Dashboard</RouterLink>
              </li>
              <li class="navbar-items">
                <svg viewBox="0 0 512 512">
                  <g>
                    <path d="m256 121.538c-72.642 0-131.74 59.099-131.74 131.741s59.099 131.739 131.74 131.739 131.74-59.098 131.74-131.739c0-72.642-59.098-131.741-131.74-131.741zm67.469 146.74h-82.469v-82.468h30v52.469h52.469z"/>
                    <path d="m512 219.617h-52.861l-2.744-11.525c-5.04-21.168-13.394-41.321-24.829-59.902l-6.21-10.091 37.392-37.392-51.455-51.454-37.391 37.392-10.091-6.21c-18.58-11.436-38.734-19.789-59.901-24.829l-11.525-2.744v-52.862h-72.768v52.861l-11.525 2.744c-21.167 5.04-41.321 13.394-59.901 24.829l-10.091 6.21-37.391-37.392-51.454 51.454 37.391 37.392-6.21 10.091c-11.436 18.581-19.79 38.735-24.832 59.903l-2.744 11.525h-52.86v72.766h52.86l2.744 11.525c5.041 21.168 13.396 41.322 24.83 59.902l6.21 10.091-37.391 37.391 51.454 51.454 37.391-37.391 10.091 6.21c18.58 11.436 38.734 19.789 59.901 24.829l11.525 2.744v52.862h72.768v-52.861l11.525-2.744c21.167-5.04 41.321-13.394 59.901-24.829l10.091-6.21 37.391 37.392 51.455-51.455-37.392-37.391 6.21-10.091c11.436-18.581 19.789-38.734 24.829-59.902l2.744-11.525h52.863zm-256 195.402c-89.184 0-161.74-72.556-161.74-161.739 0-89.185 72.557-161.741 161.74-161.741s161.74 72.557 161.74 161.741c0 89.183-72.556 161.739-161.74 161.739z"/>
                  </g>
                </svg>
                <RouterLink :to="'/users/' + this.$store.state.userConnected.id">Profile</RouterLink>
              </li>
            </ul>
          </div>
      </div>
    </div>
    <div class="navbar-container-title">
      <div class="navbar-icon-title">
        <svg viewBox="-96 -18 594 594.66894">
          <path d="m207.398438 313.148438c-.304688-.746094-.679688-1.457032-1.128907-2.125-.445312-.675782-.953125-1.304688-1.519531-1.867188-4.800781-4.796875-12.574219-4.796875-17.375 0-.570312.5625-1.078125 1.191406-1.523438 1.867188-.445312.667968-.824218 1.378906-1.128906 2.125-.308594.738281-.542968 1.507812-.703125 2.292968-.160156.789063-.242187 1.59375-.242187 2.398438 0 .824218.082031 1.648437.242187 2.457031.167969.785156.402344 1.554687.703125 2.296875.304688.738281.6875 1.445312 1.128906 2.113281.445313.671875.953126 1.296875 1.523438 1.867188 2.3125 2.277343 5.4375 3.542969 8.6875 3.523437.804688.003906 1.605469-.074218 2.394531-.230468.789063-.160157 1.5625-.394532 2.308594-.699219 1.488281-.621094 2.84375-1.527344 3.984375-2.667969.566406-.570312 1.074219-1.195312 1.519531-1.867188.441407-.667968.824219-1.375 1.128907-2.113281.3125-.742187.546874-1.511719.703124-2.296875.160157-.808594.242188-1.632812.242188-2.457031 0-.800781-.082031-1.605469-.242188-2.394531-.160156-.761719-.394531-1.507813-.703124-2.222656zm0 0"/>
          <path d="m193.664062 376.167969c-.785156.15625-1.554687.390625-2.292968.695312-.746094.308594-1.457032.6875-2.125 1.132813-.671875.453125-1.296875.964844-1.871094 1.535156-2.296875 2.308594-3.589844 5.429688-3.597656 8.683594 0 .808594.082031 1.609375.242187 2.398437.15625.789063.390625 1.558594.703125 2.296875.304688.746094.683594 1.457032 1.128906 2.125.886719 1.347656 2.042969 2.503906 3.394532 3.390625.667968.449219 1.378906.824219 2.125 1.132813.738281.304687 1.507812.539062 2.292968.699218.789063.160157 1.589844.246094 2.398438.246094 3.257812-.011718 6.375-1.308594 8.6875-3.597656.566406-.570312 1.074219-1.195312 1.519531-1.871094.449219-.667968.824219-1.378906 1.128907-2.125.3125-.738281.546874-1.507812.703124-2.296875.160157-.789062.242188-1.589843.242188-2.398437 0-3.671875-1.644531-7.160156-4.488281-9.492188-2.84375-2.335937-6.582031-3.269531-10.191407-2.554687zm0 0"/>
          <path d="m207.398438 348.320312c-.3125-.746093-.6875-1.457031-1.128907-2.128906-.445312-.667968-.957031-1.296875-1.519531-1.867187-.578125-.566407-1.199219-1.078125-1.875-1.519531-.667969-.449219-1.378906-.824219-2.125-1.132813-5.402344-2.261719-11.65625-.363281-14.898438 4.519531-.441406.671875-.816406 1.382813-1.128906 2.128906-.3125.742188-.550781 1.503907-.710937 2.296876-.3125 1.582031-.3125 3.214843 0 4.800781.160156.789062.398437 1.558593.710937 2.296875.3125.742187.6875 1.453125 1.128906 2.125.445313.675781.957032 1.296875 1.523438 1.867187.570312.570313 1.191406 1.082031 1.871094 1.527344.660156.441406 1.367187.816406 2.109375 1.125.746093.308594 1.519531.539063 2.308593.703125 1.585938.308594 3.207032.308594 4.792969 0 .785157-.15625 1.554688-.394531 2.292969-.703125.746094-.300781 1.457031-.683594 2.125-1.125.679688-.445313 1.304688-.957031 1.875-1.527344.5625-.570312 1.074219-1.191406 1.519531-1.867187.441407-.671875.816407-1.382813 1.128907-2.125.308593-.738282.542968-1.507813.703124-2.296875.324219-1.585938.324219-3.21875 0-4.800781-.160156-.792969-.394531-1.554688-.703124-2.296876zm0 0"/>
          <path d="m258.183594 235.519531c2.457031-2.246093 5.023437-4.542969 7.691406-6.914062 32.199219-28.761719 80.15625-71.636719 87.652344-159.8125h31.199218c6.785157 0 12.289063-5.5 12.289063-12.28125v-44.226563c0-6.78125-5.503906-12.285156-12.289063-12.285156h-377.332031c-6.785156 0-12.285156 5.503906-12.285156 12.285156v44.226563c0 6.78125 5.5 12.28125 12.285156 12.28125h31.199219c7.496094 88.175781 55.453125 131.050781 87.65625 159.8125 2.664062 2.371093 5.234375 4.667969 7.6875 6.914062 22.113281 20.109375 31.054688 29.65625 31.054688 43.230469 0 13.578125-8.992188 23.121094-31.054688 43.226562-2.453125 2.253907-5.023438 4.546876-7.679688 6.917969-32.210937 28.757813-80.167968 71.632813-87.664062 159.8125h-31.199219c-6.785156 0-12.285156 5.5-12.285156 12.285157v44.222656c0 6.785156 5.5 12.289062 12.285156 12.289062h377.332031c6.785157 0 12.289063-5.503906 12.289063-12.289062v-44.222656c0-6.785157-5.503906-12.285157-12.289063-12.285157h-31.199218c-7.496094-88.179687-55.453125-131.054687-87.664063-159.8125-2.65625-2.371093-5.222656-4.664062-7.679687-6.917969-22.113282-20.105468-31.054688-29.648437-31.054688-43.226562 0-13.574219 8.992188-23.121094 31.054688-43.230469zm70.636718-166.726562c-3.035156 32.273437-12.035156 57.527343-23.773437 77.980469h-217.972656c-11.734375-20.453126-20.753907-45.707032-23.785157-77.980469zm-87.183593 271.378906c2.457031 2.300781 5.148437 4.644531 7.859375 7.074219 30.714844 27.421875 72.101562 64.46875 79.335937 141.5h-27.023437l-82.839844-69.800782c-13.210938-11.171874-32.554688-11.171874-45.769531 0l-82.835938 69.800782h-27.023437c7.230468-77.03125 48.644531-114.078125 79.332031-141.5 2.714844-2.453125 5.355469-4.773438 7.863281-7.074219 18.144532-16.523437 33.09375-30.183594 37.636719-49.136719h15.875c4.492187 18.917969 19.445313 32.582032 37.589844 49.136719zm0 0"/>
        </svg>
      </div>
      <h1 class="navbar-title">Time manager</h1>
    </div>
    <div class="navbar-container-disconnect">
      <button v-if="this.$store.state.userConnected.isConnected" class="noselect navbar-button-disconnect" role="link" v-on:click="disconnectUser()">
        <div class='text'>Log out</div>
        <div class="icon">
          <svg viewBox="0 0 32 32" >
            <g>
              <path d="m16 31c7.55286 0 13.69751-6.14514 13.69751-13.69849 0-4.87958-2.62427-9.4278-6.84778-11.86951-.48413-.27856-1.04413-.35492-1.58588-.2099-.53986.1441-.99036.48987-1.2699.97351-.27948.48315-.35345 1.04651-.20935 1.58588.14404.53937.48987.99036.97302 1.26941 2.93542 1.69727 4.75952 4.85895 4.75952 8.25061 0 5.24847-4.26965 9.51813-9.51715 9.51813s-9.51715-4.26965-9.51715-9.51813c0-3.39166 1.8241-6.55334 4.75952-8.25061.48315-.27905.82898-.73004.97302-1.26941.1441-.53937.07013-1.10272-.20935-1.58636-.57825-.99561-1.85968-1.33899-2.85577-.76312-4.22351 2.44171-6.84778 6.98993-6.84778 11.86951.00001 7.55334 6.14466 13.69848 13.69752 13.69848z"/>
              <path d="m16 11.79755c1.15265 0 2.09015-.93744 2.09015-2.09015v-6.61725c0-1.15265-.9375-2.09015-2.09015-2.09015s-2.09015.9375-2.09015 2.09015v6.61725c0 1.15271.9375 2.09015 2.09015 2.09015z"/>
            </g>
          </svg>
        </div>
      </button>
    </div>
  </div>
</template>

<script>
  export default {
    data() {
      return {
        user: {
          username:"",
          id: "",
          email: ""
        },
        userConnected: {
          isConnected: false,
          id: null,
          username: "",
          email: ""
        },
        showMenu: false,
      }
    },
    methods: {
      disconnectUser: function() {
        this.$store.state.userConnected.isConnected = false
        this.$store.state.userConnected.id = null
        this.$store.state.userConnected.username = ""
        this.$store.state.userConnected.email = ""
        localStorage.userConnected = JSON.stringify({
          isConnected: false,
          id: null,
          username: '',
          email: ''
        })
        router.push('/')
      },
      changeMenu() {
        this.showMenu = !this.showMenu
      }
    }
  }
</script>

<style scoped lang="scss">
  .navbar {
    width: 100%;
    height: 100%;
    display: flex;
    margin: 0;
    padding: 10px;
    .navbar-menu-container-empty {
      width: 30%;
      height: 100;
      position: relative;
      display: block;
    }
    .navbar-menu-container {
      width: 30%;
      height: 100;
      position: relative;
      display: block;
      .navbar-menu-sup-icon {
        display: flex;
        justify-content: start;
        align-items: center;
        width: 20%;
        height: 100%;
        svg {
          fill: #ffffff;
          width: 30px;
        }
      }
      .navbar-menu {
        position: absolute;
        left: -10px;
        top: -10px;
        height: 100vh;
        width: 40%;
        background-color: black;
        margin: 0;
        z-index: 2;
        .navbar-menu-title-container {
          display: flex;
          justify-content: space-between;
          align-items: center;
          height: 7.5%;
          .navbar-menu-title {
            margin: 0;
            margin-left: 35%;
            font-size: 18px;
            color: #ffffff;
          }
          .navbar-menu-icon {
            color: white;
            margin: 0;
            font-size: 28px;
            svg {
              fill: #ffffff;
              width: 24px;
            }
          }
        }
        .navbar-container-items {
            display: flex;
            flex-direction: column;
            height: 92.5%;
            align-items: center;
            .navbar-list-items {
              list-style: none;
              display: flex;
              flex-direction: column;
              &:first-child {
                  margin-top: 30%;
              }
              .navbar-items {
                display: flex;
                justify-content: start;
                align-items: center;
                margin-bottom: 60%;
                a {
                  color: #ffffff;
                  font-weight: 400;
                  font-size: 18px;
                  text-decoration: none;
                  margin-left: 15px;
                }
                svg {
                  fill: #ffffff;
                  width: 24px;
                }
              }
            }
        }
      }
    }
    .navbar-container-title {
      width: 40%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      .navbar-icon-title {
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        svg {
          fill: #ffffff;
          width: 35px;
        }
      }
      .navbar-title {
        color: white;
        margin: 0;
        font-size: 28px;
        width: fit-content;
        margin-left: 20px;
      }
    }
    .navbar-container-disconnect {
      width: 30%;
      height: 100%;
      display: flex;
      justify-content: end;
      align-items: center;
      margin-right: 10px;
    }
  }
</style>
